
2025-05-19 22:24:49,199 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-19 22:24:49,209 - INFO - Inferred intent: {'tables': ['OEESHIFTWISE_AI'], 'reason': "The query is focused on analyzing recurring daily patterns or anomalies in performance, which pertains to the shift-level OEE performance data provided by the OEESHIFTWISE_AI table. The MACHINE_ACCESS_INFO_AI table does not contain relevant performance metrics to address the user's query."}
2025-05-19 22:24:49,212 - INFO - User query: Are there any recurring daily patterns or anomalies in performance?, Intent: {'tables': ['OEESHIFTWISE_AI'], 'reason': "The query is focused on analyzing recurring daily patterns or anomalies in performance, which pertains to the shift-level OEE performance data provided by the OEESHIFTWISE_AI table. The MACHINE_ACCESS_INFO_AI table does not contain relevant performance metrics to address the user's query."}
2025-05-19 22:24:50,058 - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-19 22:24:50,062 - INFO - Generated 1 embeddings
2025-05-19 22:24:51,159 - INFO - Retrieved 3 relevant contexts for query: Are there any recurring daily patterns or anomalie...
2025-05-19 22:24:59,732 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-19 22:24:59,738 - INFO - RAG response for query 'Are there any recurring daily patterns or anomalies in performance?': To identify recurring daily patterns or anomalies in performance, we can analyze OEE data across dif...
2025-05-19 22:25:07,687 - ERROR - Token counting error: 'Could not automatically map gpt-4o-mini to a tokeniser. Please use `tiktoken.get_encoding` to explicitly get the tokeniser you expect.'
2025-05-19 22:25:07,687 - INFO - Executed and cached query: SELECT 
    DATE,
    MACHINE,
    AVG(OEE) AS AVERAGE_OEE,
    AVG(AVAILABILITYRATE) AS AVERAGE_AVAILABILITY,
    AVG(PERFORMANCERATE) AS AVERAGE_PERFORMANCE,
    AVG(QUALITYRATE) AS AVERAGE_QUALITY
FROM 
    OEESHIFTWISE_AI 
JOIN 
    MACHINE_ACCESS_INFO_AI ON OEESHIFTWISE_AI.PUID = MACHINE_ACCESS_INFO_AI.PUID
WHERE 
    MACHINE_ACCESS_INFO_AI.USER_CODE = 'A-1704902113649' 
    AND MACHINE_ACCESS_INFO_AI.PLANT_CODE = 'O-2372838648201'
GROUP BY 
    DATE, 
    MACHINE 
ORDER BY 
    DATE, 
    MACHINE;
2025-05-19 22:25:12,343 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-19 22:25:12,343 - ERROR - Token counting error: 'Could not automatically map gpt-4o-mini to a tokeniser. Please use `tiktoken.get_encoding` to explicitly get the tokeniser you expect.'
2025-05-19 22:25:12,343 - INFO - NLP summary generated: The SQL query results indicate a consistent patter...
2025-05-19 22:25:16,344 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-19 22:25:16,348 - ERROR - Token counting error: 'Could not automatically map gpt-4o-mini to a tokeniser. Please use `tiktoken.get_encoding` to explicitly get the tokeniser you expect.'
2025-05-19 22:25:16,348 - INFO - Visualization type determined: line
2025-05-19 22:25:20,738 - INFO - Visualization created: line
2025-05-19 22:25:21,805 - INFO - Query/response logged to Snowflake: query_id=q-9e643c1a-2614-4685-a2fd-ba2a960f6d9d
